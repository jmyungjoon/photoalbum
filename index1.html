<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>EXIF</title>
</head>
<body>
<input  type= "button" src="pictures/20191006_150046.jpg" id="the-img" >
<p id="pic-info"></p>
<p id="map-link"></p>
<!-- <iframe style="border:0; width: 100%; height: 270px;" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3861.23429449651!2d121.05970075088497!3d14.585721089761897!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3397c816d5cb1d43%3A0x18ce21782b13f82!2sITTC%20(IT%20TRAINING%20CENTER)!5e0!3m2!1sen!2sph!4v1587193287649!5m2!1sen!2sph" width="600" height="450" frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe> -->


    <script type="text/javascript" src="exif.js"></script>
    <script>

        document.getElementById("the-img").onclick = function() {

                EXIF.getData(this, function() {
                var exifLong = EXIF.getTag(this, "GPSLongitude");
                var exifLat = EXIF.getTag(this, "GPSLatitude");
                var exifLongRef = EXIF.getTag(this, "GPSLongitudeRef");
                var exifLatRef = EXIF.getTag(this, "GPSLatitudeRef");
                //계산식 적용이유는 해당라이브러리가 위도경도를 도분초 단위로 출력하기 때문
                if (exifLatRef == "S") {
                    var latitude = (exifLat[0]*-1) + (( (exifLat[1]*-60) + (exifLat[2]*-1) ) / 3600);						
                } else {
                    var latitude = exifLat[0] + (( (exifLat[1]*60) + exifLat[2] ) / 3600);
                }

                if (exifLongRef == "W") {
                    var longitude = (exifLong[0]*-1) + (( (exifLong[1]*-60) + (exifLong[2]*-1) ) / 3600);						
                } else {
                    var longitude = exifLong[0] + (( (exifLong[1]*60) + exifLong[2] ) / 3600);
                }

                wtmX = latitude,
                wtmY = longitude;

                document.getElementById('map-link').innerHTML = '<a href="http://www.google.com/maps/place/'+wtmX+','+wtmY+'" target="_blank">Google Maps</a>';

            });
        }
    </script>
</body>
</html>
